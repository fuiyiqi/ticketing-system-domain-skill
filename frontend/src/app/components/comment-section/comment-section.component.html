<div class="comments-container">
  <h3>Comments</h3>

  <!-- Feature 8: Form for adding new comment -->
  <div class="add-comment-form">
    <textarea 
      [(ngModel)]="newCommentContent"
      placeholder="Write a comment..."
      rows="3"
      class="comment-input"
    ></textarea>
    <!-- Feature 3: Click event for submitting comment -->
    <button 
      class="add-comment-btn" 
      (click)="onAddComment()"
      [disabled]="!newCommentContent.trim()"
    >
      Add Comment
    </button>
  </div>

  <!-- Feature 6: Conditional rendering -->
  @if (isLoading) {
    <div class="loading-comments">Loading comments...</div>
  } @else {
    @if (comments.length === 0) {
      <div class="no-comments">
        <p>No comments yet. Be the first to comment!</p>
      </div>
    } @else {
      <!-- Feature 7: Rendering list of comments with @for -->
      <div class="comments-list">
        @for (comment of comments; track comment.id; let i = $index) {
          <div class="comment-card">
            <div class="comment-header">
              <div class="author-info">
                <span class="author-avatar">{{ comment.authorName.charAt(0).toUpperCase() }}</span>
                <!-- Feature 1: Interpolation -->
                <span class="author-name">{{ comment.authorName }}</span>
              </div>
              <span class="comment-date">{{ comment.createdAt | date:'short' }}</span>
            </div>
            <div class="comment-content">
              <!-- Feature 1: Display comment content -->
              <p>{{ comment.content }}</p>
            </div>
            <!-- Feature 7: Display comment index -->
            <div class="comment-meta">
              <small>Comment #{{ i + 1 }}</small>
            </div>
          </div>
        }
      </div>
    }
  }
</div>
